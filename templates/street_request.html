{% extends "base.html" %}

{% block title %}Новая улица — FairMarket{% endblock %}

{% block content %}
<style>
    .req-wrapper {
        min-height: calc(100vh - 140px);
        padding: 40px 20px 70px;
        background:
            radial-gradient(circle at 0 0, #ffe9f7 0, transparent 55%),
            radial-gradient(circle at 100% 40%, #ffe9d2 0, transparent 55%),
            #fdfbff;
    }

    .req-container {
        max-width: 880px;
        margin: 0 auto;
    }

    .req-back {
        display: inline-flex;
        align-items: center;
        gap: 6px;
        font-size: 14px;
        margin-bottom: 16px;
        color: #555;
        text-decoration: none;
        transition: .2s;
    }
    .req-back:hover {
        color: #000;
        transform: translateX(-3px);
    }

    .req-card {
        border-radius: 26px;
        background: #ffffff;
        box-shadow: 0 18px 36px rgba(15,23,42,0.16);
        padding: 24px 26px 22px;
        display: grid;
        grid-template-columns: minmax(0, 3fr) minmax(0, 2.3fr);
        gap: 24px;
    }

    .req-kicker {
        font-size: 12px;
        text-transform: uppercase;
        letter-spacing: .12em;
        color: #888;
        margin-bottom: 4px;
    }

    .req-title {
        font-size: 26px;
        font-weight: 800;
        margin-bottom: 6px;
    }

    .req-sub {
        font-size: 14px;
        color: #555;
        margin-bottom: 10px;
    }

    .req-form {
        display: flex;
        flex-direction: column;
        gap: 10px;
        margin-top: 4px;
    }

    .req-label {
        font-size: 13px;
        font-weight: 600;
        margin-bottom: 2px;
    }

    .req-label span {
        color: #ea580c;
    }

    .req-input,
    .req-textarea {
        width: 100%;
        border-radius: 14px;
        border: 1px solid #d4d4d8;
        padding: 10px 12px;
        font-size: 14px;
        outline: none;
        background: rgba(255,255,255,0.95);
        transition: border-color .2s, box-shadow .2s, background .2s;
    }

    .req-input:focus,
    .req-textarea:focus {
        border-color: #4f46e5;
        box-shadow: 0 0 0 2px rgba(79,70,229,0.16);
        background: #fff;
    }

    .req-textarea {
        resize: vertical;
        min-height: 70px;
    }

    .req-hint {
        font-size: 12px;
        color: #6b7280;
        margin-top: 2px;
    }

    .req-errors {
        margin: 0 0 10px 0;
        padding-left: 18px;
        font-size: 13px;
        color: #b91c1c;
    }

    .req-side {
        border-radius: 18px;
        padding: 14px 14px 12px;
        background:
            radial-gradient(circle at 10% 0, #fee2ff 0, transparent 60%),
            radial-gradient(circle at 100% 100%, #dbeafe 0, transparent 60%),
            #ffffff;
    }

    .req-side h3 {
        font-size: 15px;
        margin-bottom: 4px;
    }

    .req-side p {
        font-size: 13px;
        color: #4b5563;
        margin-bottom: 8px;
    }

    .req-side ul {
        margin: 0 0 0 16px;
        padding: 0;
        font-size: 12px;
        color: #4b5563;
    }

    .req-btn-row {
        margin-top: 10px;
        display: flex;
        flex-wrap: wrap;
        gap: 8px;
    }

    .req-btn-row .btn {
        padding-left: 18px;
        padding-right: 18px;
        border-radius: 999px;
    }

    @media (max-width: 860px) {
        .req-card {
            grid-template-columns: 1fr;
        }
    }
</style>

<div class="req-wrapper">
    <div class="req-container">
        <a href="{{ url_for('index') }}" class="req-back">← На главную</a>

        <div class="req-card">
            <div>
                <div class="req-kicker">твой квартал в цифровом городе</div>
                <div class="req-title">Запросить новую улицу</div>
                <p class="req-sub">
                    Если ни одна из существующих улиц не подходит под твою идею,
                    можно открыть собственный квартал. Мы создадим улицу и первый
                    павильон, а дальше можно добавлять объявления.
                </p>

                {% if errors %}
                    <ul class="req-errors">
                        {% for e in errors %}
                            <li>{{ e }}</li>
                        {% endfor %}
                    </ul>
                {% endif %}

                <form method="POST" class="req-form">
                    <div>
                        <div class="req-label">Название улицы <span>*</span></div>
                        <input class="req-input" type="text" name="street_name"
                               value="{{ form.street_name }}" placeholder="Например: Улица игровых проектов" required>
                    </div>

                    <div>
                        <div class="req-label">Код улицы (латиницей) <span>*</span></div>
                        <input class="req-input" type="text" name="street_code"
                               value="{{ form.street_code }}" placeholder="Например: game_street" required>
                        <div class="req-hint">
                            Используй только строчные латинские буквы, цифры и подчёркивания.
                            Этот код будет в адресной строке: <code>/street/game_street</code>.
                        </div>
                    </div>

                    <div>
                        <div class="req-label">Первый павильон на улице <span>*</span></div>
                        <input class="req-input" type="text" name="pavilion_title"
                               value="{{ form.pavilion_title }}" placeholder="Например: Команда на хакатон" required>
                    </div>

                    <div>
                        <div class="req-label">Что будет внутри павильона?</div>
                        <textarea class="req-textarea" name="pavilion_desc"
                                  placeholder="Пара фраз: чем занимаются мастера, кому эта тема интересна.">{{ form.pavilion_desc }}</textarea>
                    </div>

                    <div class="req-btn-row">
                        <button type="submit" class="btn btn-primary">
                            Создать улицу и павильон
                        </button>
                        <a href="{{ url_for('index') }}" class="btn btn-outline">
                            Отменить и вернуться
                        </a>
                    </div>
                </form>
            </div>

            <aside class="req-side">
                <h3>Как это будет работать</h3>
                <p>
                    После отправки формы ты сразу попадёшь на новую улицу. На карте
                    появится домик-павильон, который ты только что придумал.
                </p>
                <ul>
                    <li>Улица участвует в общей навигации ярмарки.</li>
                    <li>Первый павильон уже существует и ждёт объявлений.</li>
                    <li>Позже можно добавить ещё домики и предложения.</li>
                </ul>
            </aside>
        </div>
    </div>
</div>
{% endblock %}
